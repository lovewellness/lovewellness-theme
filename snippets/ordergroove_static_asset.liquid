
{% comment %}
Do NOT change this file. It has been autogenerated by the Ordergroove Shopify App.
This file can be re-written at any time.
Last updated at: 2022-02-08T02:35:50.109Z / Version: 2.1.5
{%- render 'ordergroove_static_asset' -%}
{% endcomment %}
<script>
  {%- assign secret_key = "9hWU=c%LM&3p/@K!%Y[R1a/w9/)tg#V=" -%}
  {%- assign customer_id = customer.id  -%}
  {%- assign timestamp = "now" | date: "%s" -%}
  {%- assign signature = customer_id | append: "|" | append: timestamp | hmac_sha256: secret_key -%}

  {% if template == 'cart' or template.name contains 'product' %}
    window.og_settings = (()=> {
      {% assign current_variant = product.selected_or_first_available_variant | default: product.variants.first %}
      {% assign current_selling_plan_allocations = current_variant.selling_plan_allocations %}
    
      var product_discounts = {};
      product_discounts['{{ current_variant.id }}'] = {};
                        
      {% for allocation in current_selling_plan_allocations %}
        {% assign frequency = allocation.selling_plan.options[0].value | split: " " %}

        {% if frequency.size > 1 %}
          {% assign frequency_period = frequency[1] | replace: "(s)", "" | replace: "s", "" | upcase | replace: "DAY", "1" | replace: "WEEK", "2" | replace: "MONTH", "3" %}
          {% assign frequency = frequency[0] |append: "_" | append: frequency_period %}
        {% elsif frequency.size == 1 %}
          {% assign frequency_period = frequency[0] | upcase | replace: "DAY", "1" | replace: "WEEK", "2" | replace: "MONTH", "3" %}
          {% assign frequency = "1" |append: "_" | append: frequency_period %}
        {% endif %}
        
        {% if allocation.price_adjustments.size > 0 %}
          {% if allocation.selling_plan.price_adjustments[0].value_type == "percentage" %}
            {% assign formatted_discount = allocation.selling_plan.price_adjustments[0].value | append: "%" %}
          {% else %}
            {% assign formatted_discount = allocation.selling_plan.price_adjustments[0].value | money %}
          {% endif %}

          product_discounts['{{ current_variant.id }}']['{{ frequency }}'] = ['{{ allocation.compare_at_price | money }}', '{{ formatted_discount }}', '{{ allocation.price | money }}']
        {% endif %}
      {% endfor %}
    
      return {
        "product": "{{ product.selected_or_first_available_variant.id }}",
        "cart": {
          "products": [
            {%- for line_item in cart.items -%}
              {
                "id": {{ line_item.variant_id }},
                "quantity": {{ line_item.quantity }},
                "unit_price": {{ line_item.final_price }}/100,
                "total_price": {{ line_item.final_line_price }}/100
              }{%- unless forloop.last == true -%},{%- endunless -%}
            {%- endfor -%}
          ]
        },
        product_discounts: product_discounts
      };
    })()
  {% endif %}
  window.ogShopifyConfigOSv1 = {
    {%- if customer -%}
      customer: {
        id: "{{customer.id}}",
        email: "{{customer.email}}",
        signature: "{{signature}}",
        timestamp: "{{timestamp}}",
      },
    {%- else -%}
      customer: null,
    {%- endif -%}
    settings: {
      reloadCart: true,
      blockGuestCheckout: false,
      gateway: "shopifyPayments",
      shouldUseSafeAssets: undefined,
      consentText: encodeURI(
        '{{ 'shopify.checkout.payment.subscription_agreement_label_html' | t | replace: "'", "&apos;" | replace: "
", " " | strip_newlines }}'
      ),
      consentWarning: '{{ 'shopify.checkout.field_errors.subscription_agreement_blank' | t | replace: "'", "&apos;" | replace: "
", " " | strip_newlines }}',
    }
  }
</script>
<script type="text/javascript" src="https://static.ordergroove.com/d941af3a17b011ebad4abc764e10b970/main.js"></script>
<script> 
 document.addEventListener("DOMContentLoaded", function() {
  	document.querySelectorAll('og-optout-button')[0].dispatchEvent(new Event('click'));
   	{% if product.id != 3864594120819 and product.id != 4586497835123 and product.id != 2060721586291 and product.id != 1301634908275 %}
      document.querySelector('.og-price-subscription').textContent = " - {{ product.price | times: 0.70 | money }}";
      document.querySelector('.og-price-purchase').textContent = " - {{ product.price | money }}";
    {% endif %}
 });
</script>

<style>
  .og-price-subscription, .og-price-purchase {
  	font-weight: 900;
  }
</style>