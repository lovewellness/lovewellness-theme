
{% comment %}
Do NOT change this file. It has been autogenerated by the Ordergroove Shopify App.
This file can be re-written at any time.
Last updated at: 2022-02-08T02:35:50.109Z / Version: 2.1.5
Please include the following
On PDP:
{%- render 'ordergroove_offer' product: selected_variant location: 'pdp' -%}
You can use any string value for the location attribute.
On cart/minicart:
{%- render 'ordergroove_offer' cart_type: true product: line_item location: 'cart' -%}
You can use any string value for the location attribute.
{% endcomment %}
<script>
  var productIds = [];
  {% for item in cart.items %}
  productIds.push("{{item.variant_id}}");
  {% endfor %}
  window.order_line_items = productIds;
</script>
{% if selected_variant %}
  {% assign product = selected_variant %}
{% elsif line_item %}
  {% assign product = line_item %}
{% endif %}
{% if product %}
  {% if type == 'cart' %}
    {% assign cart_type = true %}
    {% unless location %}
      {% assign location = 'cart' %}
    {% endunless %}
  {% endif %}
  {% if cart_type %}
    <og-offer product="{{ product.variant_id }}" data-line-id="{{ product.key }}" data-line-qty="{{ product.quantity }}" location="{{ location }}" os-version="1"></og-offer>
  {% else %}
    {%- for variant in product.product.variants -%}
      {% for selling_plan_allocation in variant.selling_plan_allocations %}
        {% assign frequency = selling_plan_allocation.selling_plan.options[0].value | split: " " %}
        {% if frequency.size > 1 %}
          {% assign frequency_period = frequency[1] | replace: "(s)", "" | replace: "s", "" | upcase | replace: "DAY", "1" | replace: "WEEK", "2" | replace: "MONTH", "3" %}
          {% assign frequency = frequency[0] |append: "_" | append: frequency_period %}
        {% elsif frequency.size == 1 %}
          {% assign frequency_period = frequency[0] | upcase | replace: "DAY", "1" | replace: "WEEK", "2" | replace: "MONTH", "3" %}
          {% assign frequency = "1" |append: "_" | append: frequency_period %}
        {% endif %}
        <span id="og-selling-plan-map-{{variant.id}}-{{frequency}}" selling-plan-id="{{selling_plan_allocation.selling_plan.id}}" style="display:none !important;"></span>
      {% endfor %}
    {%- endfor -%}
    <og-offer product="{{ product.id }}" location="{{location}}" os-version="1"></og-offer>
  {% endif %}
{% else %}
  <script>console.error("ordergroove_offer snippet requires a product")</script>
{% endif %}
